[defaults]
# 指定主机清单文件的路径
inventory = ./inventory/hosts.yml

# 指定角色的存放路径
roles_path = ./roles

# 首次连接新主机时，不提示确认其 SSH 指纹
host_key_checking = False

# 默认使用更人性化的 yaml 格式作为回调插件，输出更美观
stdout_callback = yaml

# 远程用户
remote_user = root

# SSH 连接超时时间
timeout = 30

# 并发执行的主机数量
forks = 10

# 智能收集 facts
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /tmp/ansible_facts
fact_caching_timeout = 86400

# 禁用重试文件
retry_files_enabled = False

# 启用性能分析和计时器
callbacks_enabled = profile_tasks, timer

[privilege_escalation]
# 定义提权相关的设置，例如使用 sudo
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
# SSH 连接优化配置
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r